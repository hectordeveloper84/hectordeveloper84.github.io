openapi: 3.0.1
info:
  title: API Servicios Software Fábrica para sistemas de  gestión (ERP)
  description: Detalle de los servicios proporcinados por el software de fábrica que son llamadas desde sistemas externos como sistemas de gestión (ERP)
   para guardar información en el sistema de fábrica. Tambien ser ofrecen servicios de consulta para poder consultar información de la fábrica desde fuera.
   almacenada en el ERP.
  version: 1.0.0
servers:
  - url: https://server.fabrica.com
tags:
  - name: Contratos de Compra
    description: Servicios de contratos de compra
  - name: Recepciones
    description: Servicios de recepciones de materia prima
  - name: Expediciones
    description: Servicios de expediciones de pienso
  - name: Agenda
    description: Servicios de datos de agenda
  - name: Materia Prima
    description: Servicios de datos de materia prima
  - name: Vehículos
    description: Servicios de datos de vehículos
  - name: Fórmulas
    description: Servicios de fórmulas
  - name: Pedidos de pienso
    description: Servicios de pedidos de pienso
  - name: Producciones
    description: Servicios de Producciones
paths:
  /clientes:
    post:
      tags:
        - Agenda
      summary: Crear o modificar clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Clientes"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Agenda
      summary: Consulta de clientes
      description: Consulta por id pasado por parametro.
      parameters:
        - name: id
          in: query
          description: Identificador del cliente (codigoExterno del cliente)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Clientes"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /proveedores:
    post:
      tags:
        - Agenda
      summary: Crear o modificar proveedores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Proveedores"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Agenda
      summary: Consulta de proveedores
      description: Consulta por id pasado por parametro.
      parameters:
        - name: id
          in: query
          description: Identificador del proveedor (codigoExterno del proveedor)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Proveedores"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /explotaciones:
    post:
      tags:
        - Agenda
      summary: Crear o modificar explotaciones
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Explotaciones"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Agenda
      summary: Consulta de explotaciones
      description: Consulta por id pasado por parametro.
      parameters:
        - name: id
          in: query
          description: Identificador de la explotación (codigoExterno de la explotación)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Explotaciones"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /transportistas:
    post:
      tags:
        - Agenda
      summary: Crear o modificar transportistas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Transportistas"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Agenda
      summary: Consulta de transportistas
      description: Consulta por id pasado por parametro.
      parameters:
        - name: id
          in: query
          description: Identificador del transportista (codigoExterno del transportista)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transportistas"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /conductores:
    post:
      tags:
        - Agenda
      summary: Crear o modificar conductores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Conductores"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Agenda
      summary: Consulta de conductores
      description: Consulta por id pasado por parametro.
      parameters:
        - name: id
          in: query
          description: Identificador del conductor (codigoExterno del conductor)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Conductores"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /materiaPrima:
    post:
      tags:
        - Materia Prima
      summary: Crear o modificar artículos de materia prima
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MateriaPrima"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Materia Prima
      summary: Consulta de materia prima
      description: Consulta por id pasado por parametro. 
      parameters:
        - name: id
          in: query
          description: Identificador de la materia prima (codigoExterno de la materia prima)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MateriaPrima"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /vehiculos:
    post:
      tags:
        - Vehículos
      summary: Crear o modificar vehiculos en el software de fábrica
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Vehiculos"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Vehículos
      summary: Consulta de materia prima
      description: Consulta por id pasado por parametro 
      parameters:
        - name: MatriculaRemolque
          in: query
          description: matricula remolque del vehículo (matriculaRemolque del vehículo)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Vehiculos"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /contratosCompra:
    post:
      tags:
        - Contratos de Compra
      summary: Crear o modificar contratos de compra generados desde el erp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ContratosCompra"
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
    get:
      tags:
        - Contratos de Compra
      summary: Consulta de contratos de compra
      description: Consulta por id pasado por parametro. El identificador codigoexterno usado anteriormente.
      parameters:
        - name: id
          in: query
          description: Identificador del contrato de compra (codigoExterno del contrato de compra)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ContratosCompra"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /recepciones:
    post:
      tags:
        - Recepciones
      summary: Crear o registrar recepciones planificadas de materia prima en el software de fábrica generados desde el ERP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RecepcionesMMPPPlanificadas"
      responses:
        '200':
          description: Recepción procesada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 
                      - Se ha guardado correctamente.
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error al procesar la recepción
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 
                      - Se debe rellenar el campo producto.
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto 
    get:
      tags:
        - Recepciones
      summary: Consulta de recepciones planificadas de materia prima
      parameters:
        - name: id
          in: query
          description: Identificador de la recepcion (codigoExterno de la recepcion)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Recepciones"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /viajesPiensoPlanificados:
    post:
      tags:
        - Expediciones
      summary: Generar en el software de fábrica viajes planificados de pienso hechos desde el erp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpedicionesPlanificadas'
      responses:
        '200':
          description: Expediciones recibidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 
                      - Expediciones procesadas correctamente
        '400':
          description: Solicitud incorrecta
        '500':
          description: Error interno del servidor
    get:
      tags:
        - Expediciones
      summary: Consulta de expediciones de pienso
      parameters:
        - name: id
          in: query
          description: Identificador de la expedicion (codigoExterno de la expedicion)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Expediciones"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /formulas:
    post:
      tags:
        - Fórmulas
      summary: guardar en el software de fábrica las formulas realizadas desde el ERP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Formulas'
      responses:
        '200':
          description: fórmulas recibidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 
                      - Fórmulas procesadas correctamente
        '400':
          description: Solicitud incorrecta
        '500':
          description: Error interno del servidor
    get:
      tags:
        - Fórmulas
      parameters:
        - name: id
          in: query
          description: Identificador de la fórmula (codigoExterno de la fórmula)
          required: true
          schema:
            type: string
      summary: Consulta de fórmulas de pienso
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Formulas"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /pedidos:
    post:
      tags:
        - Pedidos de pienso
      summary: guardar los pedidos de pienso planificados desde el erp en el software de fábrica
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PedidosPlanificados'
      responses:
        '200':
          description: pedidos recibidos correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 
                      - Pedidos procesados correctamente
        '400':
          description: Solicitud incorrecta
        '500':
          description: Error interno del servidor
    get:
      tags:
        - Pedidos de pienso
      summary: Consulta de pedidos de pienso
      parameters:
        - name: id
          in: query
          description: Identificador del pedido (codigoExterno del pedido)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PedidosPlanificados"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
  /producciones:
    get:
      tags:
        - Producciones
      summary: Consulta de Producciones de pienso
      parameters:
        - name: id
          in: query
          description: Identificador de la Producción (MatriculaEvento de la producción)
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Producciones"
        '404':
          description: No se encuentra el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `OK` - Resultado correcto
                      <br> `NOK` - Resultado incorrecto
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
                    description: >
                      Resultado de servicio:
                      <br> `NOK` - Resultado incorrecto
components:
  schemas:
    ContratosCompra:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - contratosCompra
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del sistema origen
          example: 
            - D365
        contratosCompra:
          type: array
          description: Lista de los contratos compra.
          items:
            type: object
            required:
              - accion
              - codigoExterno
              - proveedor
              - fechaInicio
              - fechaFin
              - producto
              - presentacion
              - cantidad
              - estado
            properties:
              accion:
                type: string            
                description: >
                      Resultado de servicio:
                      <br> `A` - Alta
                      <br> `M` - Modificación
              codigoExterno:
                type: string
                description: Código externo del contrato de compra
              proveedor:
                type: string
                description: Cuenta del proveedor
              fechaInicio:
                type: string
                format: date-time
                description: Fecha inicio en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              fechaFin:
                type: string
                format: date-time
                description: Fecha fin en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              producto:
                type: string
                description: Código del artículo
              presentacion:
                type: string
                description: Código de presentación
              cantidad:
                type: number
                format: double
                description: Cantidad pendiente de entrega
              unidad:
                type: string  
              estado:
                type: string
                description: >
                      Estado del acuerdo:
                      <br> `O` - Aplicación abierta
                      <br> `T` - Aplicación cerrada
                      <br> `P` - Pendiente de abrirse
              observacion:
                type: string
                description: Observaciones del acuerdo
              parametros:
                type: array
                items:
                  type: object
                  properties:
                    numeroParametro:
                      type: string
                      description: Identificador del parámetro del grupo de prueba
                    valorOptimo:
                      type: number
                      format: double
                      description: Valor óptimo del parámetro
                    valorMinimo:
                      type: number
                      format: double
                      description: Valor mínimo aceptable
                    valorMaximo:
                      type: number
                      format: double
                      description: Valor máximo aceptable
    RecepcionesPlanificadas:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - recepciones
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del sistema origen
          example: 
            - D365
        recepciones:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
              - fechaEntrada
              - matriculaRemolque
              - lineas
            properties:
              accion:
                type: string
                description: >
                  Como se gestiona el registro:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
                description: identificador de la recepción en el ERP
              matriculaRemolque:
                type: string
              matriculaVehiculo:
                type: string
              transportista:
                type: string
              codigoConductor:
                type: string
                description: Identificador en el ERP del conductor.
              nifConductor:
                type: string
                description: nif del conductor
              nombreConductor:
                type: string
                description: Nombre del conductor
              observaciones:
                type: string
              pesoEntrada:
                type: number
                format: double
                description: Peso del vehículo de entrada
              fechaEntrada:
                type: string
                format: date-time
                description: fecha de entrada en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              pesoSalida:
                type: number
                format: double
                description: Peso del vehículo de salida
              fechaSalida:
                type: string
                format: date-time
                description: fecha de salida en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              lineas:
                type: array
                items:
                  type: object
                  required:
                    - producto
                    - cantidadTeorica
                    - unidad
                  properties:
                    producto:
                      type: string
                      description: Identificador del producto
                    presentacion:
                      type: string
                      description: presentación del producto
                    cantidadTeorica:
                      type: number
                      format: double
                      description: Cantidad teorica a recepcionar
                    unidad:
                      type: string
                      description: Unidad de la cantidad teorica a recepcionar
                    proveedor:
                      type: string
                      description: Codigo del proveedor de la materia prima
                    aplicacion:
                      type: string
                      description: Codigo del acuerdo de compra de materia prima.
                    loteProveedor:
                      type: string
                      description: Lote del proveedor de materia prima
                    loteFabrica:
                      type: string
                      description: Lote que asigna el sistema de fábrica en la recepcion de materia prima o produccion de pienso
                    observaciones:
                      type: string
                      description: Observacaciones sobre la recepción.
                    calidad:
                      type: array
                      items:
                        type: object
                        properties:
                          codigoCalidad:
                            type: integer
                            description: Codigo de calidad
                          valor:
                            type: string
                            description: Valor que debe tomar la calidad              
    Recepciones:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - recepciones
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del sistema origen
          example: 
            - D365
        recepciones:
          type: array
          items:
            type: object
            properties:
              viajeId:
                type: string
                description: Número de identificación interna del viaje
              codigoExterno:
                type: string
                description: Identificador de la recepción (referencia transportista)
              fecha:
                type: string
                format: date-time
                description: Fecha en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              matriculaVehiculo:
                type: string
              matriculaRemolque:
                type: string
              transportista:
                type: string
              codigoConductor:
                type: string
                description: Identificador en el ERP del conductor.
              nifConductor:
                type: string
                description: nif del conductor
              nombreConductor:
                type: string
                description: Nombre del conductor
              fechaEntrada:
                type: string
                format: date-time
                description: Fecha de entrada en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              pesoEntrada:
                type: number
                format: double
              fechaSalida:
                type: string
                format: date-time
                description: Fecha de salida en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              pesoSalida:
                type: number
                format: double
              codigoRechazo:
                type: string
              lineas:
                type: array
                items:
                  type: object
                  required:
                    - id
                    - numeroLinea
                    - producto
                    - cantidadTeorica
                    - cantidadReal
                  properties:
                    id:
                      type: string
                    numeroLinea:
                      type: integer
                    producto:
                      type: string
                    presentacion:
                      type: string
                    numerosEnvases:
                      type: integer
                    codigoEnvase:
                      type: string
                    cantidadTeorica:
                      type: number
                      format: double
                    cantidadReal:
                      type: number
                      format: double
                    unidad:
                      type: string  
                    proveedor:
                      type: string
                    aplicacion:
                      type: string
                    loteProveedor:
                      type: string
                    loteEntrada:
                      type: string
                    fechaCaducidadLote:
                      type: string
                    codigoMuestra:
                      type: string
                    codigoRecipiente:
                      type: string
                    referenciaProveedor:
                      type: string
                    calidad:
                      type: array
                      items:
                        type: object
                        properties:
                          codigoCalidad:
                            type: integer
                          description:
                            type: string
                          valor:
                            type: number
                            format: double
    
    PedidosMMPPPlanificados:
      type: object
      description: Objeto que se manda desde el ERP para adelantar la planificación de un pedido de pienso
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - pedidos
      properties:
        mensajeId:
          type: string
          format: uuid
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example:
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          example:
            - D365
        pedidos:
          type: array
          items:
            type: object
            properties:
              accion:
                type: string
                description: >
                    Accion que se realiza:
                    <br> `A` - Alta
                    <br> `B` - Baja
              codigoExterno:
                type: string
                description: Codigo del pedido del ERP
              fecha:
                type: string
                format: date
                description: fecha de entrega del pedido
              cliente:
                type: string
              explotacion:
                type: string
                description: Código de la granja
              direccionEntrega: 
                type: string
                description: Direccion donde realizar la entrega
              nombreGranjero:
                type: string
              telefonoExplotacion:
                type: string
              observaciones:
                type: string
              lineas:
                type: array
                items:
                  type: object
                  properties:
                    producto:
                      type: string
                      description: Identificador del producto
                    cantidad:
                      type: number
                      format: double
                      description: cantidad planificada
                    unidad:
                      type: string
                      description: Unidad de la cantidad planificada
                    recetaOficial:
                      type: string
                      description: Codigo receta oficial
                    presentacion:
                      type: string
                    loteExplotacion:
                      type: string
                      description: Lote de la granja
                    prioridad:
                      type: string
                    fechaEntrega:
                      type: string
                      format: date-time
                      description: Fecha/hora de entrega planificada
                      example: 
                        - 2025-07-09T10:15+02:00
                    observaciones:
                      type: string
                    silos:
                      type: array
                      items:
                        type: object
                        properties:
                          numeroSilo:
                            type: string
                            description: Identificador del silo
                          cantidad:
                            type: number
                            format: double
                            description: cantidad planificada para el silo
                          unidad:
                            type: string
                            description: Unidad de la cantidad solicitada en el silo
    ExpedicionesPlanificadas:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - expediciones
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        viajes:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
              fecha:
                type: string
                format: date-time
                description: dia y hora que se preve la expedición
                example: 
                  - 2025-07-09T10:15+02:00
              matriculaRemolque:
                type: string
              matriculaVehiculo:
                type: string
              agenciaTransporte:
                type: string
                description: Empresa intermediaria comercial del viaje
              operadorTransporte:
                type: string
                description: Empresa que realiza el viaje.
              codigoConductor:
                type: string
                description: Identificador en el ERP del conductor.
              nifConductor:
                type: string
                description: nif del conductor
              nombreConductor:
                type: string
                description: Nombre del conductor
              lineas:
                type: array
                items:
                  type: object
                  properties:
                    pedido:
                      type: string
                      description: Codigo externo del pedido
    Clientes:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - clientes
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        clientes:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
              nif:
                type: string
              nombre:
                type: string
              direccion:
                type: string
              codigoPostal:
                type: string
              poblacion:
                type: string
              provincia:
                type: string
              pais:
                type: string
              telefono:
                type: string
              observaciones:
                type: string
    Proveedores:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - proveedores
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        proveedores:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
              nif:
                type: string
              nombre:
                type: string
              direccion:
                type: string
              codigoPostal:
                type: string
              poblacion:
                type: string
              provincia:
                type: string
              pais:
                type: string
              telefono:
                type: string
              observaciones:
                type: string
    Explotaciones:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - explotaciones
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        explotaciones:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
              nif:
                type: string
              nombre:
                type: string
              direccion:
                type: string
              codigoPostal:
                type: string
              poblacion:
                type: string
              provincia:
                type: string
              pais:
                type: string
              telefono:
                type: string
              observaciones:
                type: string
              clienteExplotacion:
                type: string
    Transportistas:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - transportistas
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        transportistas:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
              nif:
                type: string
              nombre:
                type: string
              direccion:
                type: string
              codigoPostal:
                type: string
              poblacion:
                type: string
              provincia:
                type: string
              pais:
                type: string
              telefono:
                type: string
              observaciones:
                type: string
              delegacion:
                type: string
    Conductores:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - conductores
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        conductores:
          type: array
          items:
            type: object
            required:
              - accion
              - codigoExterno
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              codigoExterno:
                type: string
              nif:
                type: string
              nombre:
                type: string
              direccion:
                type: string
              codigoPostal:
                type: string
              poblacion:
                type: string
              provincia:
                type: string
              pais:
                type: string
              telefono:
                type: string
              observaciones:
                type: string
              codigoTransportista:
                type: string
    MateriaPrima:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - conductores
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        conductores:
          type: array
          items:
            type: object
            required:
              - codigoExterno
            properties:
              codigoExterno:
                type: string
              clase:
                type: string
              nombre:
                type: string
              description:
                type: string
              versiones:
                type: array
                items:
                  type: object
                  required:
                    - codigoExternoVersion
                  properties:  
                    codigoExternoVersion:
                      type: string
                    presentacionVersion:
                      type: string
    Vehiculos:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - vehiculos
      properties:
        mensajeId:
          type: string
          format: uuid
          description: Identificador del mensaje
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          description: Identificador del origen
          example: 
            - D365
        vehiculos:
          type: array
          items:
            type: object
            required:
              - accion
              - matriculaRemolque
            properties:
              accion:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `A` - Alta
                  <br> `B` - Baja
              matriculaRemolque:
                type: string
              tipoVehiculo:
                type: integer
              vehiculoRecepciones:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `S` - Sí
                  <br> `N` - No
              vehiculoExpediciones:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `S` - Sí
                  <br> `N` - No
              codigoConductor:
                type: string
                description: Identificador en el ERP del conductor.
              nifConductor:
                type: string
                description: nif del conductor
              nombreConductor:
                type: string
                description: Nombre del conductor
              transportista:
                type: string
              pesoMaximo:
                type: number
                format: double
              taraVehiculo:
                type: number
                format: double
              numeroCajones:
                type: integer
              tieneCajonMultiproducto:
                type: string
                description: >
                  Puede tener los siguienes valores:
                  <br> `S` - Sí
                  <br> `N` - No
              puntoReferencia:
                type: string
              longitudReferenciaDelantera:
                type: number
                format: double
              longitudReferenciaTrasera:
                type: number
                format: double
              anchuraCamion:
                type: number
                format: double
              capacidad1:
                type: number
                format: double
              capacidad2:
                type: number
                format: double
              capacidad3:
                type: number
                format: double
              capacidad4:
                type: number
                format: double
              capacidad5:
                type: number
                format: double
              capacidad6:
                type: number
                format: double
              capacidad7:
                type: number
                format: double
              capacidad8:
                type: number
                format: double
              capacidad9:
                type: number
                format: double
              capacidad10:
                type: number
                format: double
              longitud1:
                type: number
                format: double
              longitud2:
                type: number
                format: double
              longitud3:
                type: number
                format: double
              longitud4:
                type: number
                format: double
              longitud5:
                type: number
                format: double
              Longitud6:
                type: number
                format: double
              longitud7:
                type: number
                format: double
              longitud8:
                type: number
                format: double
              Longitud9:
                type: number
                format: double
              longitud10:
                type: number
                format: double
    Formulas:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - formulas
      properties:
        mensajeId:
          type: string
        fechaCreacion:
          type: string
          format: date-time
          description: Fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
        formulas:
          type: object
          required:
            - codigoExternoFormula
            - version
          properties:
            formula:
              type: array
              items:
                type: object
                properties:
                  codigoExternoFormula:
                    type: string
                    description: Codigo de la formula en el ERP
                  version:
                     type: string
                  caracter:
                    type: string
                  densidadProducto:
                    type: string
                  ingredientes:
                    type: array
                    items:
                      type: object
                      required:
                        - codigoExterno
                        - cantidad
                        - unidad
                      properties:
                        codigoExterno:
                          type: string
                        description:
                          type: string
                        presentacion:
                          type: string
                        cantidad:
                          type: number
                          format: double
                        unidad:
                          type: string
                        bloqueo:
                          type: string
                          description: >
                            Puede tener los siguienes valores:
                            <br> `S` - Bloqueado (o formulas de cantidades absolutas)
                            <br> `N` - No Bloqueado
                            <br> `A` - Acumulado (no entra a formar parte del 100 % de la composición)
                        entorno:
                          type: string 
                          description: >
                            Asignación del entorno al cual debe de ser incorporado el componente dentro del proceso de fabricación:
                            <br> `2002` - Línea de transito
                            <br> `2011` - Línea dosificación No Bloqueado
                            <br> `2012` - Línea Molturación
                            <br> `2013` - Línea granulación
                            <br> `2014` - Línea envasado
                            <br> `2015` - Línea extrusionado
                            <br> `2016` - Línea preparación premezclas
                            <br> `2017` - Línea migajador
    Producciones:
      type: object
      required:
        - mensajeId
        - fechaCreacion
        - origen
        - fabricaciones
      properties:
        mensajeId:
          type: string
          format: uuid
        fechaCreacion:
          type: string
          format: date-time
          description: fecha de creación en formato ISO 8601 con franja horaria
          example: 
            - 2025-07-09T10:15+02:00
        origen:
          type: string
          example: 
            - D365
        fabricaciones:
          type: array
          items:
            type: object
            properties:
              fechaProduccion:
                type: string
                format: date-time
                description: fecha de producción en formato ISO 8601 con franja horaria
                example: 
                  - 2025-07-09T10:15+02:00
              identificadorProduccion:
                type: string
              movimientos:
                  type: object
                  properties:
                    consumidos:
                      type: array
                      items:
                        type: object
                        properties:
                          codigoProducto:
                            type: string
                          presentacion:
                            type: string
                          cantidad:
                            type: number
                            format: double
                          unidad:
                            type: string  
                          loteRecepcion:
                            type: string
                            description: Lote del proveedor de materia prima
                          loteFabrica:
                            description: Lote que asigna el sistema de fábrica en la recepcion de materia prima
                            type: string
                    producidos:
                      type: array
                      items:
                        type: object
                        properties:
                          codigoProducto:
                            type: string
                          presentacion:
                            type: string
                          cantidad:
                            type: number
                            format: double
                          unidad:
                            type: string  
                          loteFabricacion:
                            type: string
                            description: Lote que asigna el sistema de fábrica en la fabricación de pienso
  securitySchemes:
    oauth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: https://login.microsoftonline.com/vallcompanys.es/oauth2/token
          scopes:
            "lectura": Permiso de escritura
            "escritura": Permiso de lectura
security:
  - oauth2:
      - lectura
      - escritura
